<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Activities - TTC De Pinte</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='header.css') }}">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--neutral-light);
            color: var(--neutral-dark);
        }

        header {
            height: 200px;
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            background-color: var(--primary-blue);
            color: var(--primary-yellow);
            text-align: center;
            font-size: 3.5em;
            font-weight: bold;
            padding: 75px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        :root {
            /* Primary colors */
            --primary-blue: #1e3799;      /* Deeper, more professional blue */
            --primary-yellow: #ffd32a;    /* Softer yellow */

            /* Secondary colors */
            --secondary-blue: #4a69bd;    /* Lighter blue for hover states */
            --secondary-yellow: #ffeaa7;  /* Very light yellow for backgrounds */

            /* Neutral colors */
            --neutral-dark: #2d3436;      /* For text */
            --neutral-gray: #636e72;      /* For secondary text */
            --neutral-light: #f5f6fa;     /* For backgrounds */
        }

        /* Header and Navigation */
        .header-container {
            background-color: var(--primary-blue);
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .auth-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            text-align: right;
            padding: 0.5rem;
        }

        .auth-button {
            padding: 8px 16px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.2s;
        }

        .login {
            background-color: transparent;
            border: 2px solid var(--primary-yellow);
            color: var(--primary-yellow);
        }

        .login:hover {
            background-color: var(--primary-yellow);
            color: var(--primary-blue);
        }

        .register {
            background-color: var(--primary-yellow);
            color: var(--primary-blue);
        }

        .register:hover {
            background-color: var(--secondary-yellow);
            transform: translateY(-2px);
        }

        .site-title {
            color: var(--primary-yellow);
            text-align: center;
            font-size: 3.5em;
            font-weight: bold;
            padding: 40px 20px;
            margin: 0;
        }

        nav {
            background-color: var(--secondary-blue);
            padding: 15px 0;
            width: 100%
        }

        .nav-links {
            margin: 0 auto;
            display: flex;
            justify-content: center;
            gap: 30px;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: bold;
            padding: 5px 15px;
            border-radius: 3px;
            transition: all 0.2s;
        }

        .nav-links a:hover {
            background-color: var(--primary-yellow);
            color: var(--primary-blue);
        }

        .activities-section {
            margin: 40px 200px;
        }

        .activities-section h2 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid var(--primary-yellow);
            padding-bottom: 10px;
            display: inline-block;
        }

        .activity-item {
            position: relative;
            border-bottom: 1px solid #ddd;
            padding: 20px 75px;
            margin: 0 20px;
            transition: background-color 0.2s;
        }

        .activity-item:hover {
            background-color: var(--secondary-yellow);
            padding: 20px 75px;
            border-radius: 8px;
        }

        .activity-item h3,
        .activity-item .date,
        .activity-item p {
            cursor: pointer;
        }

        .activity-item h3:focus,
        .activity-item .date:focus,
        .activity-item p:focus {
            outline: 2px solid var(--primary-blue);
            background-color: var(--neutral-light);
        }

        .activity-item h3 {
            color: var(--neutral-dark);
            margin-bottom: 10px;
        }

        .activity-item .date {
            color: var(--neutral-gray);
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .activity-item p {
            color: var(--neutral-gray);
            line-height: 1.6;
        }

        .delete-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 18px;
            cursor: pointer;
            color: var(--neutral-gray);
            transition: color 0.2s;
        }

        .delete-icon:hover {
            color: var(--neutral-dark);
        }

        .add-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background-color: var(--primary-yellow);
            border: none;
            border-radius: 50%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            font-size: 36px;
            color: var(--neutral-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .add-button:hover {
            background-color: var(--secondary-yellow);
        }

        .activity-size-small img {
          max-width: 300px;
          max-height: 200px;
          overflow: auto;
        }
        .activity-size-medium img {
          max-width: 600px;
          max-height: 400px;
          overflow: auto;
        }
        .activity-size-big img {
          max-width: 100%;
          max-height: none;
        }

    </style>
</head>
<body>
    <div class="header-container">
      <div class="header-main">
        <div class="auth-buttons">
          <a href="#" class="auth-button login">Log In</a>
          <a href="#" class="auth-button register">Register</a>
        </div>
        <a href="/" class="site-title">Tafeltennis club De Pinte</a>
      </div>
      <nav>
        <div class="nav-links">
          <a href="{{ url_for('home') }}">Home</a>
          <a href="{{ url_for('info') }}">Info</a>
          <a href="{{ url_for('home') }}#competition">Competition</a>
          <a href="{{ url_for('activities') }}">News</a>
          <a href="{{ url_for('home') }}#contact">Contact</a>
          <a href="{{ url_for('training') }}">Training</a>
        </div>
      </nav>
    </div>
    <div class="activities-section" id="activity-list">
        <!-- Activities will be dynamically added here -->
    </div>
    <script>
        // Function to handle navigation
        function handleNavigation(sectionId) {
            if (window.location.pathname === '/' || window.location.pathname.endsWith('home.html')) {
                // Scroll smoothly to the section if on the home page
                const section = document.getElementById(sectionId);
                if (section) {
                    const  headerHeight = document.querySelector('.header-container')?.offsetHeight || 0;
                    const targetTop = section.getBoundingClientRect().top + window.pageYOffset - headerHeight;
                    window.scrollTo({ top: targetTop, behavior: 'smooth' });
                }
            } else {
                // Redirect to the home page with the section hash
                window.location.href = `/#${sectionId}`;
            }
        }

        async function loadActivities() {
            try {
                const activityList = document.getElementById('activity-list');

                // Load activities from the server
                const response = await fetch('/api/activities');
                const activities = await response.json();

                // Load saved image sizes
                const sizeResponse = await fetch('/image_size');
                const sizeData = await sizeResponse.json();
                const savedSizes = sizeData.activities || {};

                // Add activities to the DOM with proper sizing
                activities.forEach(activity => {
                    const activityElement = document.createElement('div');
                    activityElement.className = 'activity-item';

                    // Add data-id attribute for sizing
                    activityElement.setAttribute('data-id', activity.id);

                    // Apply saved size class if exists
                    if (savedSizes[activity.id]) {
                        activityElement.classList.add(`activity-size-${savedSizes[activity.id]}`);
                    }

                    activityElement.innerHTML = `
                        <div class="date">${activity.date}</div>
                        <h3>${activity.name}</h3>
                        <div class="activity-content">${activity.details}</div>
                    `;
                    activityList.appendChild(activityElement);
                });
            } catch (error) {
                console.error('Failed to load activities:', error);
                // Show error message to user
                const activityList = document.getElementById('activity-list');
                activityList.innerHTML = '<p>Could not load activities. Please try again later.</p>';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Handle login navigation
            document.querySelectorAll('.auth-button.login').forEach(button => {
                button.addEventListener('click', () => {
                    window.location.href = '/login';
                });
            });

            // Handle register navigation
            document.querySelectorAll('.auth-button.register').forEach(button => {
                button.addEventListener('click', () => {
                    window.location.href = '/register';
                });
            });

            // Handle home navigation
            const homeButton = document.querySelector('.nav-links a[href="#home"]');
            if (homeButton) {
                homeButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    window.location.href = '/';
                });
            }

            // Handle contact navigation
            const contactButton = document.querySelector('.nav-links a[href="#contact"]');
            if (contactButton) {
                contactButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    handleNavigation('contact');
                });
            }

            // Handle info navigation
            const infoButton = document.querySelector('.nav-links a[href="#info"]');
            if (infoButton) {
                infoButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    handleNavigation('info');
                });
            }

            // Handle training navigation
            const trainingButton = document.querySelector('.nav-links a[href="#training"]');
            if (trainingButton) {
                trainingButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    handleNavigation('training');
                });
            }

            // Handle competition navigation
            const competitionButton = document.querySelector('.nav-links a[href="#competition"]');
            if (competitionButton) {
                competitionButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    handleNavigation('competition');
                });
            }

            // Handle news navigation
            const newsButton = document.querySelector('.nav-links a[href="#news"]');
            if (newsButton) {
                newsButton.addEventListener('click', (event) => {
                    event.preventDefault();
                    handleNavigation('news');
                });
            }

            // Load activities after setting up navigation
            loadActivities();
        });
    </script>
</body>
</html>